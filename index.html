<!doctype html>
<html>

<head>
    <title>Client</title>
</head>

<body>

    <button id='move'>Move</button>
    <button class='change_map' data-map='bg-0002'>Change Map (bg-0002)</button>
    <button class='change_map' data-map='bg-0003'>Change Map (bg-0003)</button>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
        $(function () {
            var socket = io();
            
            var player = {
                id: null,
                map: null,
                x: 0,
                y: 0 
            }

            socket.on('map_changed', function(data){
                console.log('[event][map_changed]',data);
                player.map = data.target_map
            });

            socket.on('moved', function(data){
                console.log('[event][moved]: ',data);
            });

            socket.on('player_leave_map', function(data){
                console.log('[event][player_leave_map]',data);
            });

            socket.on('player_enter_map', function(data){
                console.log('[event][player_enter_map]',data);
            });

            socket.on('player_move', function(data){
                console.log('[event][player_move]',data);
            });

            socket.on('connected', function(data){
                console.log('[event][connected]',data);
                player.id = data.id
                player.map = data.map
            });

            $('#move').click(function () {
                socket.emit('move', {
                    player_id: player.id,
                    x: 10, 
                    y: 10
                });
            });

            $('.change_map').click(function () {
                socket.emit('change_map', {
                    player_id: player.id,
                    current_map: player.map,
                    target_map: $(this).attr('data-map')
                });
            });

        });

    </script>
</body>

</html>